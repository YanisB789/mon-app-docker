version: '3.8'

services:

  database:
    image: postgres:15-alpine    
    container_name: ma-db        
    environment:                 
      POSTGRES_DB: mon_app
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: motdepasse123
    volumes:                    
      - donnees_db:/var/lib/postgresql/data
    networks:                    
      - mon-reseau

  backend:
    image: yanis78/mon-backend:latest
    container_name: mon-backend
    ports:
      - "5000:5000"            
    environment:
      DB_HOST: database       
      DB_USER: admin
      DB_PASSWORD: motdepasse123
    depends_on:                
      - database
    networks:
      - mon-reseau

  frontend:
    image: yanis78/mon-frontend:latest
    container_name: mon-frontend
    ports:
      - "3000:3000"             
    depends_on:                
      - backend
    networks:
      - mon-reseau

volumes:
  donnees_db:                  

networks:
  mon-reseau:
    driver: bridge
